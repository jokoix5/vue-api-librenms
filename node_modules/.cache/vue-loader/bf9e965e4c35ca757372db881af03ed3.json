{"remainingRequest":"/home/media/Documents/seminar tugas akhir/vue-api-librenms-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/media/Documents/seminar tugas akhir/vue-api-librenms-master/src/components/Uptime.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/media/Documents/seminar tugas akhir/vue-api-librenms-master/src/components/Uptime.vue","mtime":1597678348000},{"path":"/home/media/Documents/seminar tugas akhir/vue-api-librenms-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/media/Documents/seminar tugas akhir/vue-api-librenms-master/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/media/Documents/seminar tugas akhir/vue-api-librenms-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/media/Documents/seminar tugas akhir/vue-api-librenms-master/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMb2FkaW5nIGZyb20gIkAvY29tcG9uZW50cy9Mb2FkaW5nIgppbXBvcnQgeyB0b1RpbWVzdGFtcCB9IGZyb20gIi4uL3V0aWxzL2RhdGUiCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlVwdGltZSIsCgogIGNvbXBvbmVudHM6IHsgTG9hZGluZyB9LAoKICBwcm9wczogWyJkYXRlU3RhcnQiLCAiZGF0ZUVuZCJdLAoKICBkYXRhOiAoKSA9PiAoewogICAgdXB0aW1lSW1hZ2U6ICIiLAogICAgaXNFbXB0eTogZmFsc2UsCiAgICBpc0xvYWRpbmc6IGZhbHNlLAogIH0pLAoKICBtb3VudGVkKCkgewogICAgdGhpcy5mZXRjaFVwdGltZUdyYXBoKCkKICB9LAoKICB3YXRjaDogewogICAgZGF0ZVN0YXJ0KCkgewogICAgICB0aGlzLmZldGNoVXB0aW1lR3JhcGgoKQogICAgfSwKCiAgICBkYXRlRW5kKCkgewogICAgICB0aGlzLmZldGNoVXB0aW1lR3JhcGgoKQogICAgfSwKICB9LAoKICBtZXRob2RzOiB7CiAgICBmZXRjaFVwdGltZUdyYXBoKCkgewogICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWUKICAgICAgbGV0IGJhc2VVcmwgPSBgL2RldmljZXMvJHt0aGlzLiRyb3V0ZS5wYXJhbXMuaG9zdG5hbWV9L2dyYXBocy9oZWFsdGgvZGV2aWNlX3VwdGltZT9sZWdlbmQ9bm9gCiAgICAgIGxldCBmcm9tRGF0ZSA9IGBmcm9tPSR7dG9UaW1lc3RhbXAodGhpcy5kYXRlU3RhcnQpfWAKICAgICAgbGV0IHRvRGF0ZSA9IGB0bz0ke3RvVGltZXN0YW1wKHRoaXMuZGF0ZUVuZCl9YAogICAgICBsZXQgd2lkdGggPSBgd2lkdGg9JHs1MDB9YAogICAgICBsZXQgaGVpZ2h0ID0gYGhlaWdodD0kezE2MH1gCiAgICAgIGxldCB1cmwgPSBbYmFzZVVybCwgZnJvbURhdGUsIHRvRGF0ZSwgd2lkdGgsIGhlaWdodF0uam9pbigiJiIpCgogICAgICB0aGlzLmF4aW9zCiAgICAgICAgLmdldCh1cmwsIHsgcmVzcG9uc2VUeXBlOiAiYmxvYiIgfSkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnNpemUgPT09IDApIHsKICAgICAgICAgICAgdGhpcy5pc0VtcHR5ID0gdHJ1ZQogICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsZXQgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKQoKICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwocmVzcG9uc2UuZGF0YSkKCiAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSAoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy51cHRpbWVJbWFnZSA9IHJlYWRlci5yZXN1bHQKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy5pc0VtcHR5ID0gZmFsc2UKICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICB0aGlzLmVycm9ycy5wdXNoKGUpCiAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlCiAgICAgICAgfSkKICAgIH0sCiAgfSwKfQo="},{"version":3,"sources":["Uptime.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Uptime.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-card flat class=\"mx-auto\">\n    <div v-if=\"isEmpty\">\n      <v-alert type=\"warning\">\n        Opps! Graph for Uptime is not available.\n      </v-alert>\n    </div>\n\n    <div v-if=\"isLoading\">\n      <Loading />\n    </div>\n\n    <div v-if=\"!isLoading\">\n      <div v-if=\"!isEmpty\">\n        <v-img\n          class=\"white--text align-end\"\n          max-height=\"700px\"\n          max-width=\"100%\"\n          :src=\"uptimeImage\"\n        ></v-img>\n      </div>\n    </div>\n  </v-card>\n</template>\n\n<script>\nimport Loading from \"@/components/Loading\"\nimport { toTimestamp } from \"../utils/date\"\n\nexport default {\n  name: \"Uptime\",\n\n  components: { Loading },\n\n  props: [\"dateStart\", \"dateEnd\"],\n\n  data: () => ({\n    uptimeImage: \"\",\n    isEmpty: false,\n    isLoading: false,\n  }),\n\n  mounted() {\n    this.fetchUptimeGraph()\n  },\n\n  watch: {\n    dateStart() {\n      this.fetchUptimeGraph()\n    },\n\n    dateEnd() {\n      this.fetchUptimeGraph()\n    },\n  },\n\n  methods: {\n    fetchUptimeGraph() {\n      this.isLoading = true\n      let baseUrl = `/devices/${this.$route.params.hostname}/graphs/health/device_uptime?legend=no`\n      let fromDate = `from=${toTimestamp(this.dateStart)}`\n      let toDate = `to=${toTimestamp(this.dateEnd)}`\n      let width = `width=${500}`\n      let height = `height=${160}`\n      let url = [baseUrl, fromDate, toDate, width, height].join(\"&\")\n\n      this.axios\n        .get(url, { responseType: \"blob\" })\n        .then((response) => {\n          if (response.data.size === 0) {\n            this.isEmpty = true\n            this.isLoading = false\n          } else {\n            let reader = new FileReader()\n\n            reader.readAsDataURL(response.data)\n\n            reader.onload = () => {\n              this.uptimeImage = reader.result\n            }\n\n            this.isEmpty = false\n            this.isLoading = false\n          }\n        })\n        .catch((e) => {\n          this.errors.push(e)\n          this.isLoading = false\n        })\n    },\n  },\n}\n</script>\n\n"]}]}