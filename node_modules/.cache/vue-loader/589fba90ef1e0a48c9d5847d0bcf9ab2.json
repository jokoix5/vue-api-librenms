{"remainingRequest":"/home/media/Documents/seminar tugas akhir/vue-api-librenms-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/media/Documents/seminar tugas akhir/vue-api-librenms-master/src/components/Storage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/media/Documents/seminar tugas akhir/vue-api-librenms-master/src/components/Storage.vue","mtime":1597678348000},{"path":"/home/media/Documents/seminar tugas akhir/vue-api-librenms-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/media/Documents/seminar tugas akhir/vue-api-librenms-master/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/media/Documents/seminar tugas akhir/vue-api-librenms-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/media/Documents/seminar tugas akhir/vue-api-librenms-master/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMb2FkaW5nIGZyb20gIkAvY29tcG9uZW50cy9Mb2FkaW5nIgppbXBvcnQgeyB0b1RpbWVzdGFtcCB9IGZyb20gIi4uL3V0aWxzL2RhdGUiCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlN0b3JhZ2UiLAoKICBjb21wb25lbnRzOiB7IExvYWRpbmcgfSwKCiAgcHJvcHM6IFsiZGF0ZVN0YXJ0IiwgImRhdGVFbmQiXSwKCiAgZGF0YTogKCkgPT4gKHsKICAgIHN0b3JhZ2VHcmFwaDogIiIsCiAgICBpc0VtcHR5OiBmYWxzZSwKICAgIGlzTG9hZGluZzogZmFsc2UsCiAgfSksCgogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmZldGNoU3RvcmFnZSgpCiAgfSwKCiAgd2F0Y2g6IHsKICAgIGRhdGVTdGFydCgpIHsKICAgICAgdGhpcy5mZXRjaFN0b3JhZ2UoKQogICAgfSwKCiAgICBkYXRlRW5kKCkgewogICAgICB0aGlzLmZldGNoU3RvcmFnZSgpCiAgICB9LAogIH0sCgogIG1ldGhvZHM6IHsKICAgIGZldGNoU3RvcmFnZSgpIHsKICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlCiAgICAgIGxldCBiYXNlVXJsID0gYC9kZXZpY2VzLyR7dGhpcy4kcm91dGUucGFyYW1zLmhvc3RuYW1lfS9kZXZpY2Vfc3RvcmFnZT9sZWdlbmQ9bm9gCiAgICAgIGxldCBmcm9tRGF0ZSA9IGBmcm9tPSR7dG9UaW1lc3RhbXAodGhpcy5kYXRlU3RhcnQpfWAKICAgICAgbGV0IHRvRGF0ZSA9IGB0bz0ke3RvVGltZXN0YW1wKHRoaXMuZGF0ZUVuZCl9YAogICAgICBsZXQgd2lkdGggPSBgd2lkdGg9JHs1MDB9YAogICAgICBsZXQgaGVpZ2h0ID0gYGhlaWdodD0kezE2MH1gCiAgICAgIGxldCB1cmwgPSBbYmFzZVVybCwgZnJvbURhdGUsIHRvRGF0ZSwgd2lkdGgsIGhlaWdodF0uam9pbigiJiIpCgogICAgICB0aGlzLmF4aW9zCiAgICAgICAgLmdldCh1cmwsIHsgcmVzcG9uc2VUeXBlOiAiYmxvYiIgfSkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnNpemUgPT09IDApIHsKICAgICAgICAgICAgdGhpcy5pc0VtcHR5ID0gdHJ1ZQogICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsZXQgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKQoKICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwocmVzcG9uc2UuZGF0YSkKCiAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSAoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5zdG9yYWdlR3JhcGggPSByZWFkZXIucmVzdWx0CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoaXMuaXNFbXB0eSA9IGZhbHNlCiAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2UKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgdGhpcy5lcnJvcnMucHVzaChlKQogICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZQogICAgICAgIH0pCiAgICB9LAogIH0sCn0K"},{"version":3,"sources":["Storage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Storage.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-card flat class=\"mx-auto\">\n    <div v-if=\"isEmpty\">\n      <v-alert type=\"warning\">\n        Opps! Graph for Storage is not available.\n      </v-alert>\n    </div>\n\n    <div v-if=\"isLoading\">\n      <Loading />\n    </div>\n\n    <div v-if=\"!isLoading\">\n      <div v-if=\"!isEmpty\">\n        <v-img\n          class=\"white--text align-end\"\n          max-height=\"300px\"\n          max-width=\"100%\"\n          :src=\"storageGraph\"\n        ></v-img>\n      </div>\n    </div>\n  </v-card>\n</template>\n\n<script>\nimport Loading from \"@/components/Loading\"\nimport { toTimestamp } from \"../utils/date\"\n\nexport default {\n  name: \"Storage\",\n\n  components: { Loading },\n\n  props: [\"dateStart\", \"dateEnd\"],\n\n  data: () => ({\n    storageGraph: \"\",\n    isEmpty: false,\n    isLoading: false,\n  }),\n\n  mounted() {\n    this.fetchStorage()\n  },\n\n  watch: {\n    dateStart() {\n      this.fetchStorage()\n    },\n\n    dateEnd() {\n      this.fetchStorage()\n    },\n  },\n\n  methods: {\n    fetchStorage() {\n      this.isLoading = true\n      let baseUrl = `/devices/${this.$route.params.hostname}/device_storage?legend=no`\n      let fromDate = `from=${toTimestamp(this.dateStart)}`\n      let toDate = `to=${toTimestamp(this.dateEnd)}`\n      let width = `width=${500}`\n      let height = `height=${160}`\n      let url = [baseUrl, fromDate, toDate, width, height].join(\"&\")\n\n      this.axios\n        .get(url, { responseType: \"blob\" })\n        .then((response) => {\n          if (response.data.size === 0) {\n            this.isEmpty = true\n            this.isLoading = false\n          } else {\n            let reader = new FileReader()\n\n            reader.readAsDataURL(response.data)\n\n            reader.onload = () => {\n              this.storageGraph = reader.result\n            }\n\n            this.isEmpty = false\n            this.isLoading = false\n          }\n        })\n        .catch((e) => {\n          this.errors.push(e)\n          this.isLoading = false\n        })\n    },\n  },\n}\n</script>\n\n"]}]}